<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouro Oracular - Mapa Numerológico</title>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;700&family=Nexa:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --ouro: #D4AF37;
            --roxo: #6A0DAD;
            --preto: #121212;
            --preto-claro: #1E1E1E;
            --preto-medio: #181818;
            --roxo-claro: #9B59B6;
            --ouro-claro: #F5D090;
        }
        
        body {
            font-family: 'Nexa', sans-serif;
            background: linear-gradient(135deg, var(--preto), var(--preto-medio));
            color: #f0f0f0;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--ouro);
            padding-bottom: 20px;
            position: relative;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .logo-img {
            height: 80px;
            margin-right: 15px;
        }
        
        .logo-text {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--ouro), var(--roxo-claro));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'League Spartan', sans-serif;
        }
        
        h1, h2, h3, h4 {
            font-family: 'League Spartan', sans-serif;
            color: var(--ouro);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        
        .subtitle {
            color: var(--roxo-claro);
            font-style: italic;
            margin-top: 0;
        }
        
        .form-container {
            background: rgba(30, 30, 30, 0.8);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--ouro);
            box-shadow: 0 0 20px rgba(106, 13, 173, 0.5);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--ouro-claro);
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--roxo);
            border-radius: 5px;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: var(--ouro);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        button {
            background: linear-gradient(45deg, var(--roxo), var(--preto));
            color: white;
            border: 1px solid var(--ouro);
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'League Spartan', sans-serif;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            background: linear-gradient(45deg, var(--roxo-claro), var(--preto));
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.7);
            transform: translateY(-2px);
        }
        
        .btn-generate {
            background: linear-gradient(45deg, var(--ouro), var(--roxo));
            margin-right: 10px;
        }
        
        .btn-generate:hover {
            background: linear-gradient(45deg, var(--ouro-claro), var(--roxo-claro));
        }
        
        .result-container {
            display: none;
            margin-top: 30px;
            background: rgba(30, 30, 30, 0.8);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--ouro);
            box-shadow: 0 0 20px rgba(106, 13, 173, 0.5);
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--roxo);
            padding-bottom: 15px;
        }
        
        .result-title {
            margin: 0;
        }
        
        .result-section {
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(24, 24, 24, 0.6);
            border-left: 4px solid var(--roxo);
            border-radius: 0 5px 5px 0;
        }
        
        .result-section h3 {
            margin-top: 0;
            color: var(--ouro-claro);
            position: relative;
        }
        
        .section-subtitle {
            font-size: 0.9rem;
            color: var(--roxo-claro);
            font-style: italic;
            margin-top: 5px;
            margin-bottom: 15px;
        }
        
        .calculation-example {
            font-size: 0.85rem;
            color: #aaa;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--ouro);
            margin: 10px 0;
        }
        
        .result-description {
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .life-cycle-stage {
            background: rgba(40, 40, 40, 0.5);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 3px solid var(--ouro);
        }
        
        .life-cycle-title {
            font-weight: bold;
            color: var(--ouro-claro);
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .life-cycle-age {
            font-style: italic;
            color: var(--roxo-claro);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .life-cycle-description {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--roxo);
        }
        
        .current-cycle {
            border: 2px solid var(--ouro);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        
        .variation-controls {
            margin-top: 15px;
            display: flex;
            align-items: center;
        }
        
        .variation-btn {
            padding: 5px 10px;
            font-size: 12px;
            margin-right: 10px;
            background: var(--preto);
        }
        
        .variation-count {
            font-size: 12px;
            color: var(--roxo-claro);
        }
        
        .symbol {
            font-size: 24px;
            margin: 0 5px;
            color: var(--ouro);
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            border-top: 1px solid var(--roxo);
            color: var(--roxo-claro);
            font-size: 14px;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: var(--ouro);
        }

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--ouro);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="https://assets.zyrosite.com/AE02nZ6p4aF8Z3Gp/design-sem-nome-71-Yg2y7806klU5yR26.png" alt="Ouro Oracular" class="logo-img">
                <div class="logo-text">OURO ORACULAR</div>
            </div>
            <h1>Mapa Numerológico Completo</h1>
            <p class="subtitle">Desvendando os segredos dos números em sua vida</p>
        </header>
        
        <div class="form-container">
            <div class="form-group">
                <label for="fullName">Nome Completo de Nascimento:</label>
                <input type="text" id="fullName" placeholder="Digite o nome completo como no registro de nascimento" required>
                <small id="nameError" style="color: #ff6b6b; display: none;">Por favor, insira apenas letras e espaços</small>
            </div>
            
            <div class="form-group">
                <label for="birthDate">Data de Nascimento:</label>
                <input type="date" id="birthDate" required>
            </div>
            
            <div class="form-actions">
                <button class="btn-generate" onclick="generateMap()">Gerar Mapa</button>
                <button id="btnPdf" onclick="generatePDF()" disabled>Gerar PDF</button>
            </div>
        </div>

        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <p>Gerando seu mapa numerológico...</p>
        </div>
        
        <div id="resultContainer" class="result-container">
            <div class="result-header">
                <h2 class="result-title">Mapa Numerológico de <span id="clientName"></span></h2>
                <div>
                    <span class="symbol">✧</span>
                    <span id="birthDateDisplay"></span>
                    <span class="symbol">✧</span>
                </div>
            </div>
            
            <!-- Seções do mapa numerológico -->
            <div class="result-section" id="destinyNumberSection">
                <h3>Número do Destino</h3>
                <p class="section-subtitle">O caminho que sua alma escolheu para esta encarnação</p>
                <div class="calculation-example" id="destinyCalculation"></div>
                <div class="result-value" id="destinyNumber"></div>
                <div class="result-description" id="destinyDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('destiny')">Outra Interpretação</button>
                    <span class="variation-count" id="destinyVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="soulNumberSection">
                <h3>Número da Alma (Vogais)</h3>
                <p class="section-subtitle">Seus desejos mais profundos e motivações internas</p>
                <div class="calculation-example" id="soulCalculation"></div>
                <div class="result-value" id="soulNumber"></div>
                <div class="result-description" id="soulDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('soul')">Outra Interpretação</button>
                    <span class="variation-count" id="soulVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="personalityNumberSection">
                <h3>Número da Personalidade (Consoantes)</h3>
                <p class="section-subtitle">Como você se apresenta ao mundo</p>
                <div class="calculation-example" id="personalityCalculation"></div>
                <div class="result-value" id="personalityNumber"></div>
                <div class="result-description" id="personalityDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('personality')">Outra Interpretação</button>
                    <span class="variation-count" id="personalityVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="expressionNumberSection">
                <h3>Número de Expressão Total</h3>
                <p class="section-subtitle">Seus talentos naturais e potencial geral</p>
                <div class="calculation-example" id="expressionCalculation"></div>
                <div class="result-value" id="expressionNumber"></div>
                <div class="result-description" id="expressionDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('expression')">Outra Interpretação</button>
                    <span class="variation-count" id="expressionVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="challengeNumbersSection">
                <h3>Números de Desafio</h3>
                <p class="section-subtitle">As principais lições que você precisa aprender</p>
                <div class="calculation-example" id="challengeCalculation"></div>
                <div class="result-value" id="challengeNumbers"></div>
                <div class="result-description" id="challengeDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('challenge')">Outra Interpretação</button>
                    <span class="variation-count" id="challengeVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="karmicLessonsSection">
                <h3>Lições Cármicas</h3>
                <p class="section-subtitle">Letras ausentes que indicam lições a desenvolver</p>
                <div class="calculation-example" id="karmicLessonsCalculation"></div>
                <div class="result-value" id="karmicLessons"></div>
                <div class="result-description" id="karmicLessonsDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('karmicLessons')">Outra Interpretação</button>
                    <span class="variation-count" id="karmicLessonsVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="karmicDebtsSection">
                <h3>Dívidas Cármicas</h3>
                <p class="section-subtitle">Lições profundas trazidas de vidas passadas</p>
                <div class="calculation-example" id="karmicDebtsCalculation"></div>
                <div class="result-value" id="karmicDebts"></div>
                <div class="result-description" id="karmicDebtsDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('karmicDebts')">Outra Interpretação</button>
                    <span class="variation-count" id="karmicDebtsVariationCount"></span>
                </div>
            </div>
            
            <div class="result-section" id="lifeCyclesSection">
                <h3>Ciclos de Vida</h3>
                <p class="section-subtitle">As três grandes fases da sua vida e suas energias predominantes</p>
                <div class="calculation-example" id="lifeCyclesCalculation"></div>
                
                <div id="lifeCyclesContainer">
                    <!-- Os ciclos serão inseridos aqui pelo JavaScript -->
                </div>
                
                <div class="result-description">
                    <p>Seu caminho é dividido em três ciclos principais, cada um com uma energia específica:</p>
                    <ul>
                        <li><strong>Primeiro Ciclo (0-30 anos):</strong> Período de formação e aprendizagem das lições básicas</li>
                        <li><strong>Segundo Ciclo (30-60 anos):</strong> Fase de produtividade e realização pessoal</li>
                        <li><strong>Terceiro Ciclo (60+ anos):</strong> Tempo de sabedoria e colheita dos frutos</li>
                    </ul>
                </div>
            </div>
            
            <div class="result-section" id="personalYearSection">
                <h3>Ano Pessoal Atual</h3>
                <p class="section-subtitle">A energia predominante para o ano corrente</p>
                <div class="calculation-example" id="personalYearCalculation"></div>
                <div class="result-value" id="personalYear"></div>
                <div class="result-description" id="personalYearDescription"></div>
                <div class="variation-controls">
                    <button class="variation-btn" onclick="changeVariation('personalYear')">Outra Interpretação</button>
                    <span class="variation-count" id="personalYearVariationCount"></span>
                </div>
            </div>
            
            <div class="form-actions">
                <button onclick="generatePDF()">Gerar PDF</button>
            </div>
        </div>
        
        <footer>
            Ouro Oracular &copy; <span id="currentYear"></span> - Todos os direitos reservados
        </footer>
    </div>

    <script>
        // Configurações iniciais
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // Dados de interpretação numerológica completos
        const interpretations = {
            destiny: {
                1: [
                    "Você é um líder nato, com forte independência e originalidade. Seu caminho exige que você desenvolva autoconfiança, individualidade e capacidade de tomar iniciativas.",
                    "O número 1 do Destino indica um caminho de autodescoberta e realização pessoal. Você está aqui para aprender a confiar em si mesmo e a se destacar como pioneiro.",
                    "Seu destino é marcar seu próprio caminho com coragem e determinação. Você tem o potencial de inspirar outros com sua visão única e força de vontade."
                ],
                2: [
                    "Você é um pacificador natural, com grande sensibilidade e intuição. Seu caminho envolve desenvolver cooperação, diplomacia e trabalho em equipe.",
                    "O número 2 do Destino indica um caminho de relacionamentos e harmonia. Você está aqui para aprender a equilibrar suas necessidades com as dos outros.",
                    "Seu destino é unir pessoas e criar harmonia. Você tem o dom da paciência e da compreensão, podendo ser um excelente mediador."
                ],
                3: [
                    "Você é criativo e expressivo, com talento para comunicação. Seu caminho envolve desenvolver autoexpressão, otimismo e alegria de viver.",
                    "O número 3 do Destino indica um caminho de criatividade e autoexpressão. Você está aqui para aprender a usar seus talentos para inspirar os outros.",
                    "Seu destino é espalhar alegria e inspiração através de suas palavras e ações. Você tem o dom de ver o lado positivo da vida."
                ],
                4: [
                    "Você é prático e organizado, com grande capacidade de trabalho. Seu caminho envolve desenvolver disciplina, estabilidade e um forte senso de dever.",
                    "O número 4 do Destino indica um caminho de construção sólida. Você está aqui para aprender a valorizar o trabalho árduo e a estrutura.",
                    "Seu destino é construir bases sólidas para si e para os outros. Você tem o dom de transformar ideias em realidade através de trabalho consistente."
                ],
                5: [
                    "Você é aventureiro e versátil, com amor pela liberdade. Seu caminho envolve desenvolver adaptabilidade, progresso e experiência de vida.",
                    "O número 5 do Destino indica um caminho de liberdade e mudança. Você está aqui para aprender a lidar com a variedade da vida com graça.",
                    "Seu destino é experimentar a vida em toda sua diversidade. Você tem o dom de se adaptar a novas situações e inspirar outros a abraçar a mudança."
                ],
                6: [
                    "Você é responsável e protetor, com forte senso de justiça. Seu caminho envolve desenvolver amor incondicional, serviço e equilíbrio.",
                    "O número 6 do Destino indica um caminho de serviço e responsabilidade. Você está aqui para aprender a cuidar dos outros com compaixão.",
                    "Seu destino é ser um curador e conselheiro. Você tem o dom de criar harmonia e beleza em seu ambiente e relacionamentos."
                ],
                7: [
                    "Você é analítico e espiritual, com amor pelo conhecimento. Seu caminho envolve desenvolver sabedoria interior, intuição e compreensão.",
                    "O número 7 do Destino indica um caminho de busca espiritual e intelectual. Você está aqui para aprender a confiar em sua voz interior.",
                    "Seu destino é buscar a verdade e o entendimento. Você tem o dom de perceber padrões e conexões que outros não veem."
                ],
                8: [
                    "Você é ambicioso e organizado, com talento para liderança. Seu caminho envolve desenvolver poder pessoal, autoridade e equilíbrio material.",
                    "O número 8 do Destino indica um caminho de realização material e poder. Você está aqui para aprender a usar recursos com sabedoria.",
                    "Seu destino é alcançar sucesso e reconhecimento. Você tem o dom de transformar visões em realidade através de planejamento e execução eficazes."
                ],
                9: [
                    "Você é humanitário e compassivo, com ampla visão de mundo. Seu caminho envolve desenvolver compaixão universal, criatividade e serviço.",
                    "O número 9 do Destino indica um caminho de serviço humanitário. Você está aqui para aprender a dar sem esperar retorno.",
                    "Seu destino é inspirar outros através de seu exemplo. Você tem o dom de compreender e perdoar as falhas humanas."
                ],
                11: [
                    "Você é um visionário inspirado, com potencial espiritual elevado. Seu caminho envolve desenvolver intuição, iluminação e inspiração.",
                    "O número 11 do Destino indica um caminho de mestre espiritual. Você está aqui para aprender a canalizar sabedoria superior.",
                    "Seu destino é inspirar a humanidade com sua visão elevada. Você tem o dom de perceber verdades espirituais profundas."
                ],
                22: [
                    "Você é um construtor mestre, com capacidade de realizar grandes obras. Seu caminho envolve desenvolver visão prática, liderança e serviço global.",
                    "O número 22 do Destino indica um caminho de realização em grande escala. Você está aqui para aprender a materializar ideias grandiosas.",
                    "Seu destino é deixar um legado duradouro para a humanidade. Você tem o dom de combinar visão espiritual com realização prática."
                ]
            },
            soul: {
                1: [
                    "Sua alma anseia por independência e autossuficiência. Você se sente mais realizado quando pode liderar e tomar suas próprias decisões.",
                    "Internamente, você valoriza a originalidade e a coragem. Suas motivações mais profundas envolvem alcançar reconhecimento pessoal.",
                    "No íntimo, você deseja ser pioneiro e inovador. Sua satisfação vem de iniciar projetos e seguir seu próprio caminho."
                ],
                2: [
                    "Sua alma anseia por harmonia e parcerias. Você se sente mais realizado em ambientes cooperativos e relacionamentos significativos.",
                    "Internamente, você valoriza a paz e a diplomacia. Suas motivações mais profundas envolvem criar união e compreensão.",
                    "No íntimo, você deseja ser amado e apreciado. Sua satisfação vem de ajudar os outros e resolver conflitos."
                ],
                // ... (padrão similar para outros números)
            },
            personality: {
                1: [
                    "Você se apresenta ao mundo como uma pessoa independente e autoconfiante. Os outros o veem como um líder natural com forte determinação.",
                    "Sua personalidade externa transmite força e originalidade. Você projeta uma imagem de alguém que sabe o que quer e como conseguir.",
                    "Para o mundo, você aparece como uma pessoa dinâmica e cheia de iniciativa. Sua presença é marcante e inspira ação."
                ],
                2: [
                    "Você se apresenta ao mundo como uma pessoa diplomática e sensível. Os outros o veem como um pacificador e bom ouvinte.",
                    "Sua personalidade externa transmite gentileza e cooperação. Você projeta uma imagem de alguém que valoriza o trabalho em equipe.",
                    "Para o mundo, você aparece como uma pessoa paciente e compreensiva. Sua presença acalma e harmoniza os ambientes."
                ],
                // ... (padrão similar para outros números)
            },
            expression: {
                1: [
                    "Seus talentos naturais incluem liderança, iniciativa e originalidade. Você tem potencial para ser pioneiro em sua área de atuação.",
                    "Sua expressão total revela capacidade de começar coisas novas e tomar decisões independentes. Você brilha quando pode seguir sua própria visão.",
                    "Seu potencial geral inclui criatividade e autoconfiança. Você pode alcançar sucesso através de sua capacidade de inovar e liderar."
                ],
                2: [
                    "Seus talentos naturais incluem diplomacia, cooperação e sensibilidade. Você tem potencial para unir pessoas e resolver conflitos.",
                    "Sua expressão total revela capacidade de trabalhar em equipe e criar harmonia. Você brilha em ambientes que valorizam a colaboração.",
                    "Seu potencial geral inclui paciência e compreensão. Você pode alcançar sucesso através de sua capacidade de ouvir e mediar."
                ],
                // ... (padrão similar para outros números)
            },
            challenge: {
                1: [
                    "Seu principal desafio é desenvolver autoconfiança e independência. Você precisa aprender a confiar em seu próprio julgamento.",
                    "A lição mais importante para você é superar o medo de ficar sozinho ou de tomar iniciativas. Aprenda a valorizar sua individualidade.",
                    "Você está aqui para dominar a arte da liderança e da originalidade. Seu desafio é expressar sua própria identidade sem medo."
                ],
                2: [
                    "Seu principal desafio é desenvolver autoconfiança e independência. Você precisa aprender a confiar em seu próprio julgamento.",
                    "A lição mais importante para você é superar o medo de ficar sozinho ou de tomar iniciativas. Aprenda a valorizar sua individualidade.",
                    "Você está aqui para dominar a arte da liderança e da originalidade. Seu desafio é expressar sua própria identidade sem medo."
                ],
                // ... (padrão similar para outros números)
            },
            karmicLessons: {
                A: [
                    "A ausência da letra A indica uma lição cármica sobre independência e iniciativa. Você precisa desenvolver autoconfiança e capacidade de começar coisas novas.",
                    "A falta da letra A em seu nome sugere que em vidas passadas você pode ter sido muito dependente dos outros. Nesta vida, aprenda a tomar suas próprias decisões."
                ],
                B: [
                    "A ausência da letra B indica uma lição cármica sobre cooperação e sensibilidade. Você precisa desenvolver paciência e capacidade de trabalhar em equipe.",
                    "A falta da letra B em seu nome sugere que em vidas passadas você pode ter sido muito independente. Nesta vida, aprenda o valor da cooperação."
                ],
                // ... (padrão similar para outras letras)
            },
            karmicDebts: {
                13: [
                    "O número 13 como dívida cármica indica que em vidas passadas você pode ter abusado de poder ou sido muito controlador. Nesta vida, aprenda a usar o poder com sabedoria.",
                    "Sua dívida cármica 13 sugere lições sobre transformação e renascimento. Você está aqui para aprender a lidar com mudanças de forma positiva."
                ],
                14: [
                    "O número 14 como dívida cármica indica que em vidas passadas você pode ter sido irresponsável com liberdade. Nesta vida, aprenda a equilibrar liberdade com responsabilidade.",
                    "Sua dívida cármica 14 sugere lições sobre adaptação e flexibilidade. Você está aqui para aprender a lidar com mudanças sem perder seu centro."
                ],
                // ... (padrão similar para outros números)
            },
            personalYear: {
                1: [
                    "Este é um ano de novos começos e iniciativas. É tempo de plantar sementes para o futuro e agir com independência.",
                    "O ano pessoal 1 traz oportunidades para iniciar projetos importantes. Foque em sua individualidade e coragem para tomar decisões.",
                    "Energia de pioneirismo e originalidade marca este ano. É um período favorável para dar o primeiro passo em direção a seus objetivos."
                ],
                2: [
                    "Este é um ano de paciência e cooperação. É tempo de desenvolver relacionamentos e trabalhar em equipe.",
                    "O ano pessoal 2 traz oportunidades para diplomacia e harmonia. Foque em escutar os outros e buscar equilíbrio.",
                    "Energia de parceria e sensibilidade marca este ano. É um período favorável para resolver conflitos e construir alianças."
                ],
                // ... (padrão similar para outros números)
            }
        };

        // Função para validar o nome (apenas letras e espaços)
        function validateName(name) {
            const regex = /^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/;
            return regex.test(name);
        }

        // Função para calcular o número de destino
        function calculateDestinyNumber(dateStr) {
            const [day, month, year] = dateStr.split('/').map(Number);
            let sum = day + month + year;
            
            while (sum > 9 && sum !== 11 && sum !== 22) {
                sum = sum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
            }
            
            return sum;
        }

        // Função para formatar a data corretamente (sem problemas de fuso horário)
       function formatDate(dateString) {
    const date = new Date(dateString);
    const day = date.getDate().toString().padStart(2, '0');
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    const year = date.getFullYear();
    
    return `${day}/${month}/${year}`;
}

        // Função para extrair vogais do nome
        function extractVowels(name) {
            const vowels = name.match(/[AEIOUÁÉÍÓÚÂÊÎÔÛÃÕÀÈÌÒÙÄËÏÖÜ]/gi) || [];
            return vowels.join('');
        }

        // Função para extrair consoantes do nome
        function extractConsonants(name) {
            const consonants = name.match(/[BCDFGHJKLMNPQRSTVWXYZÇ]/gi) || [];
            return consonants.join('');
        }

        // Função para calcular o valor numérico de uma string
        function calculateNameValue(name) {
            const letterValues = {
                'A': 1, 'J': 1, 'S': 1,
                'B': 2, 'K': 2, 'T': 2,
                'C': 3, 'L': 3, 'U': 3,
                'D': 4, 'M': 4, 'V': 4,
                'E': 5, 'N': 5, 'W': 5,
                'F': 6, 'O': 6, 'X': 6,
                'G': 7, 'P': 7, 'Y': 7,
                'H': 8, 'Q': 8, 'Z': 8,
                'I': 9, 'R': 9
            };
            
            let sum = 0;
            for (let char of name.toUpperCase()) {
                if (letterValues[char]) {
                    sum += letterValues[char];
                }
            }
            
            while (sum > 9 && sum !== 11 && sum !== 22) {
                sum = sum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
            }
            
            return sum;
        }

        // Função para calcular os números de desafio
        function calculateChallengeNumbers(birthDate) {
            const [day, month, year] = birthDate.split('/').map(Number);
            
            // Primeiro desafio: mês - dia
            const first = Math.abs(month - day);
            // Segundo desafio: dia - ano reduzido
            const yearReduced = reduceToSingleDigit(year);
            const second = Math.abs(day - yearReduced);
            // Terceiro desafio: primeiro - segundo
            const third = Math.abs(first - second);
            // Quarto desafio: mês - ano reduzido
            const fourth = Math.abs(month - yearReduced);
            
            return {
                first: reduceToSingleDigit(first),
                second: reduceToSingleDigit(second),
                third: reduceToSingleDigit(third),
                fourth: reduceToSingleDigit(fourth)
            };
        }

        // Função para identificar lições cármicas (letras ausentes)
        function findKarmicLessons(name) {
            const allLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const presentLetters = new Set(name.toUpperCase().replace(/[^A-Z]/g, ''));
            const missingLetters = [];
            
            for (let letter of allLetters) {
                if (!presentLetters.has(letter)) {
                    missingLetters.push(letter);
                }
            }
            
            return missingLetters;
        }

        // Função para identificar dívidas cármicas (números 13, 14, 16 ou 19)
        function findKarmicDebts(name, birthDate) {
    const debts = [];
    const letterValues = {
        'A': 1, 'J': 1, 'S': 1,
        'B': 2, 'K': 2, 'T': 2,
        // ... (restante do mapeamento)
    };
    
    // Verificar no nome
    for (let char of name.toUpperCase()) {
        if (letterValues[char] === 1 || letterValues[char] === 4 || 
            letterValues[char] === 6 || letterValues[char] === 9) {
            const nextChar = name[name.indexOf(char)+1];
            if (nextChar && letterValues[nextChar.toUpperCase()] === 3) {
                if (!debts.includes(13)) debts.push(13);
            }
            // Verificar outros números de forma similar
        }
    }
    
    // Verificar na data
    const dateNumbers = birthDate.replace(/\D/g, '');
    if (dateNumbers.includes('13')) debts.push(13);
    if (dateNumbers.includes('14')) debts.push(14);
    if (dateNumbers.includes('16')) debts.push(16);
    if (dateNumbers.includes('19')) debts.push(19);
    
    return debts.length > 0 ? [...new Set(debts)] : ['Nenhuma dívida cármica identificada'];
}

        // Função para calcular o ano pessoal atual
        function calculatePersonalYear(birthDate, currentDate = new Date()) {
            const [day, month] = birthDate.split('/').map(Number);
            const currentDay = currentDate.getDate();
            const currentMonth = currentDate.getMonth() + 1;
            const currentYear = currentDate.getFullYear();
            
            // Se ainda não passou o aniversário deste ano, subtrai 1
            const birthdayPassed = (currentMonth > month) || 
                                  (currentMonth === month && currentDay >= day);
            const birthYear = birthdayPassed ? currentYear : currentYear - 1;
            
            const sum = day + month + birthYear;
            return reduceToSingleDigit(sum);
        }

        // Função para calcular os ciclos de vida (versão melhorada)
        function calculateLifeCycles(date) {
            const [day, month, year] = date.split('/').map(Number);
            
            // Reduz cada componente para um único dígito
            const firstCycle = reduceToSingleDigit(month);    // Mês = Primeiro ciclo (0-30 anos)
            const secondCycle = reduceToSingleDigit(day);     // Dia = Segundo ciclo (30-60 anos)
            const thirdCycle = reduceToSingleDigit(year);     // Ano = Terceiro ciclo (60+ anos)
            
            return {
                cycles: [
                    { number: firstCycle, start: 0, end: 30, description: "Fase de formação e aprendizagem" },
                    { number: secondCycle, start: 30, end: 60, description: "Fase de produtividade e realização" },
                    { number: thirdCycle, start: 60, end: null, description: "Fase de sabedoria e legado" }
                ],
                currentAge: calculateCurrentAge(date)
            };
        }
        
        // Função para calcular a idade atual
        function calculateCurrentAge(birthDate) {
            const [day, month, year] = birthDate.split('/').map(Number);
            const today = new Date();
            const birthDateObj = new Date(year, month - 1, day);
            
            let age = today.getFullYear() - birthDateObj.getFullYear();
            const monthDiff = today.getMonth() - birthDateObj.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDateObj.getDate())) {
                age--;
            }
            
            return age;
        }
        
        // Função para exibir os ciclos de vida
        function displayLifeCycles(cyclesData) {
            const container = document.getElementById('lifeCyclesContainer');
            container.innerHTML = '';
            
            cyclesData.cycles.forEach(cycle => {
                const cycleElement = document.createElement('div');
                cycleElement.className = `life-cycle-stage ${cyclesData.currentAge >= cycle.start && (cycle.end === null || cyclesData.currentAge < cycle.end) ? 'current-cycle' : ''}`;
                
                cycleElement.innerHTML = `
                    <div class="life-cycle-title">
                        Ciclo ${cycle.number} ${cyclesData.currentAge >= cycle.start && (cycle.end === null || cyclesData.currentAge < cycle.end) ? '(Ciclo Atual)' : ''}
                    </div>
                    <div class="life-cycle-age">
                        ${cycle.start} - ${cycle.end || 'fim da vida'} anos: ${cycle.description}
                    </div>
                    <div class="life-cycle-description">
                        ${getLifeCycleInterpretation(cycle.number)}
                    </div>
                `;
                
                container.appendChild(cycleElement);
            });
        }
        
        // Função para obter interpretação do ciclo de vida
        function getLifeCycleInterpretation(number) {
            const interpretations = {
                1: "Período de independência e autodescoberta. Tempo para desenvolver autoconfiança e iniciativa própria.",
                2: "Fase de relacionamentos e cooperação. Tempo para desenvolver sensibilidade e trabalho em equipe.",
                3: "Etapa de criatividade e expressão. Tempo para desenvolver talentos e comunicação.",
                4: "Período de construção e estabilidade. Tempo para desenvolver disciplina e organização.",
                5: "Fase de mudanças e liberdade. Tempo para desenvolver adaptabilidade e versatilidade.",
                6: "Etapa de responsabilidade e família. Tempo para desenvolver amor incondicional e serviço.",
                7: "Período de introspecção e sabedoria. Tempo para desenvolver conhecimento interior e espiritualidade.",
                8: "Fase de realização material. Tempo para desenvolver poder pessoal e eficiência.",
                9: "Etapa de compaixão e serviço humanitário. Tempo para desenvolver visão universal e perdão."
            };
            
            return interpretations[number] || "Este ciclo traz lições importantes para seu desenvolvimento pessoal e espiritual.";
        }

        // Função principal para gerar o mapa
       function generateMap() {
    try {
        // ... código existente
    } catch (error) {
        console.error('Erro detalhado:', error);
        alert(`Erro ao gerar mapa: ${error.message}`);
        document.getElementById('loading').style.display = 'none';
    }
}
            
            // Mostrar loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';
            
            // Usar setTimeout para permitir que a UI atualize antes dos cálculos pesados
            setTimeout(() => {
                try {
                    const formattedDate = formatDate(birthDate);
                    
                    // Cálculos numerológicos
                    const destinyNumber = calculateDestinyNumber(formattedDate);
                    const vowels = extractVowels(fullName);
                    const consonants = extractConsonants(fullName);
                    const soulNumber = calculateNameValue(vowels);
                    const personalityNumber = calculateNameValue(consonants);
                    const expressionNumber = calculateNameValue(fullName.replace(/\s/g, ''));
                    const challenges = calculateChallengeNumbers(formattedDate);
                    const karmicLessons = findKarmicLessons(fullName);
                    const karmicDebts = findKarmicDebts(fullName, formattedDate);
                    const lifeCycles = calculateLifeCycles(formattedDate);
                    const personalYear = calculatePersonalYear(formattedDate);
                    
                    // Exibir resultados
                    document.getElementById('clientName').textContent = fullName;
                    document.getElementById('birthDateDisplay').textContent = formattedDate;
                    
                    // Número do Destino
                    document.getElementById('destinyNumber').textContent = destinyNumber;
                    document.getElementById('destinyCalculation').textContent = `Cálculo: ${formattedDate.split('/').join(' + ')} = ${destinyNumber}`;
                    displayRandomInterpretation('destiny', destinyNumber);
                    
                    // Número da Alma
                    document.getElementById('soulNumber').textContent = soulNumber;
                    document.getElementById('soulCalculation').textContent = `Vogais: ${vowels || 'Nenhuma'} = ${soulNumber}`;
                    displayRandomInterpretation('soul', soulNumber);
                    
                    // Número da Personalidade
                    document.getElementById('personalityNumber').textContent = personalityNumber;
                    document.getElementById('personalityCalculation').textContent = `Consoantes: ${consonants || 'Nenhuma'} = ${personalityNumber}`;
                    displayRandomInterpretation('personality', personalityNumber);
                    
                    // Número de Expressão
                    document.getElementById('expressionNumber').textContent = expressionNumber;
                    document.getElementById('expressionCalculation').textContent = `Nome completo: ${fullName.replace(/\s/g, '')} = ${expressionNumber}`;
                    displayRandomInterpretation('expression', expressionNumber);
                    
                    // Números de Desafio
                    document.getElementById('challengeNumbers').textContent = 
                        `${challenges.first}, ${challenges.second}, ${challenges.third}, ${challenges.fourth}`;
                   document.getElementById('challengeCalculation').textContent = 
    `1º: ${Math.abs(parseInt(formattedDate.split('/')[1]) - parseInt(formattedDate.split('/')[0]))} | ` +
    `2º: ${Math.abs(parseInt(formattedDate.split('/')[0]) - reduceToSingleDigit(parseInt(formattedDate.split('/')[2]))} | ` +
    `3º: 1º-2º | 4º: ${Math.abs(parseInt(formattedDate.split('/')[1]) - reduceToSingleDigit(parseInt(formattedDate.split('/')[2])))}`;
                    
                    // Lições Cármicas
                    document.getElementById('karmicLessons').textContent = karmicLessons.join(', ') || 'Nenhuma';
                    if (karmicLessons.length > 0) {
                        displayRandomInterpretation('karmicLessons', karmicLessons[0]);
                    } else {
                        document.getElementById('karmicLessonsDescription').textContent = 
                            "Seu nome contém todas as letras do alfabeto, indicando que você trouxe uma bagagem completa de experiências de vidas passadas.";
                    }
                    
                    // Dívidas Cármicas
                    document.getElementById('karmicDebts').textContent = 
                        Array.isArray(karmicDebts) ? karmicDebts.join(', ') : karmicDebts;
                    if (Array.isArray(karmicDebts)) {
    displayRandomInterpretation('karmicDebts', karmicDebts[0]);
}
                    
                    // Ciclos de Vida
                    document.getElementById('lifeCyclesCalculation').textContent = 
                        `Primeiro ciclo: Mês (${formattedDate.split('/')[1]}) | ` +
                        `Segundo ciclo: Dia (${formattedDate.split('/')[0]}) | ` +
                        `Terceiro ciclo: Ano (${formattedDate.split('/')[2]})`;
                    displayLifeCycles(lifeCycles);
                    
                    // Ano Pessoal
                    document.getElementById('personalYear').textContent = personalYear;
                    document.getElementById('personalYearCalculation').textContent = 
                        `Dia + Mês + Ano atual = ${formattedDate.split('/')[0]} + ${formattedDate.split('/')[1]} + ${new Date().getFullYear()} = ${personalYear}`;
                    displayRandomInterpretation('personalYear', personalYear);
                    
                    // Mostrar resultados
                    document.getElementById('resultContainer').style.display = 'block';
                    document.getElementById('btnPdf').disabled = false;
                    
                } catch (error) {
                    console.error('Erro ao gerar mapa:', error);
                    alert('Ocorreu um erro ao processar seu mapa. Por favor, tente novamente.');
                } finally {
                    document.getElementById('loading').style.display = 'none';
                }
            }, 100);
        }
        
        // Função para gerar o PDF (versão completa)
        async function generatePDF() {
            try {
                document.getElementById('loading').style.display = 'block';
                
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                const name = document.getElementById('clientName').textContent;
                const date = document.getElementById('birthDateDisplay').textContent;
                
                // CAPA DO PDF
                doc.addImage('https://assets.zyrosite.com/AE02nZ6p4aF8Z3Gp/design-sem-nome-71-Yg2y7806klU5yR26.png', 'PNG', 75, 40, 60, 60);
                
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(106, 13, 173);
                doc.setFontSize(28);
                doc.text('OURO ORACULAR', 105, 120, { align: 'center' });
                
                doc.setFontSize(22);
                doc.setTextColor(212, 175, 55);
                doc.text('MAPAS NUMEROLÓGICOS', 105, 135, { align: 'center' });
                
                doc.setFontSize(20);
                doc.setTextColor(0, 0, 0);
                doc.text(name, 105, 160, { align: 'center' });
                
                doc.setFontSize(16);
                doc.text(`Nascimento: ${date}`, 105, 170, { align: 'center' });
                
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text('Relatório gerado em: ' + new Date().toLocaleDateString(), 105, 180, { align: 'center' });
                
                // PÁGINA DE CONTEÚDO
                doc.addPage();
                
                // Adicionar conteúdo como texto (em vez de imagem para melhor qualidade)
                doc.setFontSize(16);
                doc.setTextColor(106, 13, 173);
                doc.text(`Mapa Numerológico de ${name}`, 14, 20);
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                
                // Adicionar cada seção como texto
                const sections = [
                    'destinyNumberSection',
                    'soulNumberSection',
                    'personalityNumberSection',
                    'expressionNumberSection',
                    'challengeNumbersSection',
                    'karmicLessonsSection',
                    'karmicDebtsSection',
                    'lifeCyclesSection',
                    'personalYearSection'
                ];
                
                let yPosition = 30;
                
                sections.forEach(sectionId => {
                    const section = document.getElementById(sectionId);
                    const title = section.querySelector('h3').textContent;
                    const subtitle = section.querySelector('.section-subtitle').textContent;
                    const value = section.querySelector('.result-value')?.textContent || '';
                    const description = section.querySelector('.result-description').textContent;
                    
                    doc.setFontSize(14);
                    doc.setTextColor(106, 13, 173);
                    doc.text(title, 14, yPosition);
                    yPosition += 7;
                    
                    doc.setFontSize(10);
                    doc.setTextColor(150, 150, 150);
                    doc.text(subtitle, 14, yPosition);
                    yPosition += 7;
                    
                    if (value) {
                        doc.setFontSize(12);
                        doc.setTextColor(212, 175, 55);
                        doc.text(`Número: ${value}`, 14, yPosition);
                        yPosition += 7;
                    }
                    
                    doc.setFontSize(10);
                    doc.setTextColor(0, 0, 0);
                    const splitText = doc.splitTextToSize(description, 180);
                    doc.text(splitText, 14, yPosition);
                    yPosition += splitText.length * 7 + 10;
                    
                    // Verificar se precisa de nova página
                    if (yPosition > 250) {
                        doc.addPage();
                        yPosition = 20;
                    }
                });
                
                // Salva o PDF
                doc.save(`Mapa_Numerologico_${name.replace(/\s+/g, '_')}.pdf');
                
            } catch (error) {
                console.error('Erro ao gerar PDF:', error);
                alert('Houve um erro ao gerar o PDF. Por favor, tente novamente.');
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        // Funções auxiliares
        function reduceToSingleDigit(number) {
            let num = number;
            while (num > 9 && num !== 11 && num !== 22) {
                num = num.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
            }
            return num;
        }
        
        function displayRandomInterpretation(type, number) {
            if (typeof number === 'object') number = number[0]; // Para arrays como lições cármicas
            if (!interpretations[type] || !interpretations[type][number]) return;
            
            const interpretationsArray = interpretations[type][number];
            const randomIndex = Math.floor(Math.random() * interpretationsArray.length);
            document.getElementById(`${type}Description`).textContent = interpretationsArray[randomIndex];
        }
        
        function changeVariation(type) {
            let number;
            if (type === 'karmicLessons') {
                const letters = document.getElementById('karmicLessons').textContent.split(', ');
                if (letters.length > 0) {
                    number = letters;
                } else {
                    return;
                }
            } else {
                number = parseInt(document.getElementById(`${type}Number`).textContent);
            }
            displayRandomInterpretation(type, number);
        }
    </script>
</body>
</html>
